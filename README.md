# ひらがな手書き練習アプリ (Hiragana Writing Practice App)

子供向けのひらがな手書き練習アプリケーションです。4歳児を対象とした、直感的で楽しい学習体験を提供します。

## 🌟 特徴

- **全ひらがな対応**: 46文字すべてのひらがなに対応（あ〜ん）
- **ランダム出題**: 予測不可能な文字選択で効果的な学習
- **難易度別練習**: 5段階の難易度レベルで段階的な学習
- **進捗追跡**: 文字別の練習履歴と習熟度の可視化
- **タッチフレンドリー**: タブレットやスマートフォンでの手書き入力に最適化
- **子供向けUI**: 大きなボタン、カラフルなデザイン、励ましのメッセージ
- **シンプルな操作**: 複雑な設定なしで、すぐに練習を開始
- **3段階評価**: 「すばらしい」「よくできました」「もう一度」の分かりやすいフィードバック
- **手本表示**: 正しい文字形を参考として表示
- **データ永続化**: 練習進捗の自動保存と復元

## 📱 対応文字

全46文字のひらがなに対応しています：

### あ行（難易度1）
あ、い、う、え、お

### か行（難易度2）
か、き、く、け、こ

### さ行（難易度2）
さ、し、す、せ、そ

### た行（難易度2）
た、ち、つ、て、と

### な行（難易度2）
な、に、ぬ、ね、の

### は行（難易度3）
は、ひ、ふ、へ、ほ

### ま行（難易度3）
ま、み、む、め、も

### や行（難易度3）
や、ゆ、よ

### ら行（難易度4）
ら、り、る、れ、ろ

### わ行（難易度4）
わ、を、ん

## 🚀 使い方

### 開発環境での起動

1. **リポジトリをクローン**
   ```bash
   git clone <repository-url>
   cd hiragana-writing-practice
   ```

2. **依存関係をインストール**
   ```bash
   npm install
   ```

3. **ローカルサーバーで起動**
   
   任意の静的ファイルサーバーを使用してください：
   
   ```bash
   # Python 3の場合
   python -m http.server 8000
   
   # Node.jsのhttp-serverを使用する場合
   npx http-server
   
   # Live Serverを使用する場合
   npx live-server
   ```

4. **ブラウザでアクセス**
   
   `http://localhost:8000` にアクセスしてアプリを開始

### アプリの使用方法

1. **練習モード選択**: 
   - 「ランダム練習」: 全文字からランダムに出題
   - 「難易度別練習」: 指定した難易度の文字のみ練習
2. **文字を書く**: 表示された文字をキャンバスに指やペンで書く
3. **手本確認**: 「手本を見る」ボタンで正しい文字形を確認
4. **提出**: 「できた！」ボタンで採点を受ける
5. **結果確認**: フィードバックを確認し、次の文字に進むか再挑戦
6. **進捗確認**: 練習した文字の履歴と習熟度を確認

## 🛠️ 技術スタック

### フロントエンド
- **Vanilla JavaScript (ES6 modules)** - フレームワークなし、純粋なJSとモダンなモジュールシステム
- **HTML5 Canvas** - 描画インターフェースとストローク取得
- **CSS3** - グラデーション、flexbox、レスポンシブデザインを使用したカスタムスタイリング
- **Web APIs** - タッチイベント、localStorage によるデータ永続化

### ビルドシステム & テスト
- **Jest** - jsdom環境でのテストフレームワーク
- **Babel** - テスト用のES6+トランスパイル
- **ES Modules** - ネイティブブラウザモジュールシステム

### アーキテクチャパターン
- **コンポーネントベースアーキテクチャ** - 画面/機能ごとの分離されたコンポーネント
- **サービス層** - サービスクラスに分離されたビジネスロジック
- **モデルクラス** - セッション、文字、描画データのデータ構造
- **イベント駆動** - DOMイベントとカスタムイベントハンドリング

## 📁 プロジェクト構造

```
hiragana-writing-practice/
├── index.html                 # メインアプリケーションエントリーポイント
├── package.json              # 依存関係とスクリプト
├── jest.config.js            # テスト設定
├── js/
│   ├── main.js               # アプリケーションブートストラップ
│   ├── app.js                # メインAppクラス、中央コーディネーター
│   ├── components/           # UIコンポーネント
│   │   ├── MainMenuComponent.js
│   │   ├── PracticeViewComponent.js
│   │   ├── ExampleViewComponent.js
│   │   ├── ResultViewComponent.js
│   │   ├── CharacterDisplayComponent.js
│   │   └── ProgressViewComponent.js
│   ├── services/             # ビジネスロジック
│   │   ├── DrawingService.js
│   │   ├── RecognitionService.js
│   │   ├── ScoreService.js
│   │   ├── HiraganaDataService.js
│   │   ├── DataStorageService.js
│   │   ├── RandomizationService.js
│   │   ├── ProgressTrackingService.js
│   │   ├── DataMigrationService.js
│   │   ├── PerformanceMonitor.js
│   │   └── ErrorHandler.js
│   └── models/               # データモデル
│       ├── PracticeSession.js
│       ├── DrawingData.js
│       ├── HiraganaCharacter.js
│       └── CharacterProgress.js
├── styles/
│   └── main.css              # 全アプリケーションスタイル
├── tests/                    # テストスイート
│   ├── setup.js              # Jestテスト環境セットアップ
│   └── *.test.js             # コンポーネントとサービスのユニットテスト
└── test-*.html               # 手動テスト用ページ
```

## 🎯 学習機能

### ランダム出題システム
アプリは以下のアルゴリズムで効果的な学習を支援します：

- **重み付き選択**: 練習頻度の低い文字ほど出題されやすくなります
- **反復防止**: 同じ文字が連続で出題されることを防ぎます
- **進捗連動**: 習熟度の低い文字を優先的に出題します
- **バランス調整**: 全文字を均等に練習できるよう自動調整します

### 難易度システム
文字は以下の基準で5段階に分類されています：

- **レベル1**: あ行（あいうえお）- 基本的な形状
- **レベル2**: か・さ・た・な行 - 中程度の複雑さ
- **レベル3**: は・ま・や行 - やや複雑な形状
- **レベル4**: ら・わ行 - 高い複雑さ
- **レベル5**: 特殊文字（将来の拡張用）

### 進捗追跡
各文字の学習状況を詳細に記録：

- **練習回数**: 各文字の練習回数を記録
- **平均スコア**: 文字別の平均得点を計算
- **習熟度**: 練習頻度とスコアから習熟レベルを判定
- **最終練習日**: 最後に練習した日時を記録

## 🧪 テスト

### テスト実行

```bash
# 全テストを実行
npm test

# ウォッチモードでテスト実行
npm run test:watch

# カバレッジレポート生成
npm run test:coverage
```

### テストの種類

- **ユニットテスト**: 各コンポーネントとサービスの個別テスト
- **統合テスト**: コンポーネント間の連携テスト
- **ランダム化テスト**: 文字選択アルゴリズムの検証
- **進捗追跡テスト**: データ永続化と復元の検証
- **パフォーマンステスト**: 46文字対応での動作速度検証
- **データ移行テスト**: 既存データの互換性確認
- **ブラウザ互換性テスト**: 必要なWeb API対応チェック
- **タッチ操作テスト**: タッチイベントの処理テスト

## 🌐 ブラウザサポート

### 必要な機能
- ES6 モジュールサポート
- HTML5 Canvas API
- Touch Events API
- localStorage API

### 推奨ブラウザ
- Chrome 61+
- Firefox 60+
- Safari 11+
- Edge 16+

### モバイル対応
- iOS Safari 11+
- Chrome for Android 61+
- Samsung Internet 7.2+

## 🎨 デザインコンセプト

### 子供向けデザイン原則
- **シンプルさ重視**: 複雑さより分かりやすさを優先
- **視覚的フィードバック**: テキストより視覚的な反応を重視
- **励まし重視**: 批判より励ましを重視
- **タッチファースト**: タッチ操作を前提とした設計
- **日本語インターフェース**: UI テキストは日本語

### カラーパレット
- **メインカラー**: #4ECDC4 (青緑) - 落ち着きと集中
- **アクセントカラー**: #FF6B6B (赤) - 注意と行動
- **成功カラー**: #FFD93D (黄) - 達成感と喜び
- **背景グラデーション**: #FFE5B4 → #FFCCCB (暖かみのある色調)

## 🔧 開発

### 開発用コマンド

```bash
# 依存関係インストール
npm install

# テスト実行
npm test

# テストウォッチモード
npm run test:watch

# カバレッジレポート
npm run test:coverage
```

### 新しい機能の概要

#### ランダム出題システム
- **インテリジェント選択**: 練習頻度の低い文字を優先的に出題
- **重複防止**: 連続して同じ文字が出題されることを防止
- **進捗連動**: 習熟度に基づいた文字選択の重み付け

#### 難易度システム
- **5段階評価**: 文字の複雑さに基づく難易度分類（1-5）
- **段階的学習**: 易しい文字から難しい文字への自然な進行
- **カスタム練習**: 特定の難易度レベルのみの練習モード

#### 進捗追跡機能
- **文字別統計**: 各文字の練習回数、平均スコア、習熟度
- **視覚的進捗**: 練習済み文字の一覧表示と進捗バー
- **データ永続化**: localStorage による進捗データの自動保存

### 開発ガイドライン

#### 新機能の追加
1. 適切なディレクトリ（components/services/models）にファイルを作成
2. ES6 モジュールとしてエクスポート
3. `app.js` で初期化
4. 対応するテストファイルを作成

#### データ構造の拡張
- 文字データは `HiraganaDataService` で一元管理
- 進捗データは `ProgressTrackingService` で処理
- ランダム化ロジックは `RandomizationService` で実装

#### パフォーマンス最適化
- 文字テンプレートの遅延読み込み
- localStorage の効率的な使用
- メモリ管理とデータクリーンアップ

## 📝 ライセンス

このプロジェクトは教育目的で作成されています。

## 🤝 コントリビューション

バグ報告や機能提案は Issue でお知らせください。

## 📞 サポート

技術的な問題や質問がある場合は、Issue を作成してください。

## 📈 更新履歴

### v2.0.0 - Hiragana Expansion (最新)
- ✨ **全46文字対応**: すべてのひらがな文字に対応
- 🎲 **ランダム出題**: インテリジェントな文字選択システム
- 📊 **進捗追跡**: 文字別の詳細な学習履歴
- 🎯 **難易度システム**: 5段階の難易度分類
- 🔄 **データ移行**: 既存データの自動移行対応
- ⚡ **パフォーマンス最適化**: 大量文字データの効率的処理
- 🧪 **テスト拡充**: 包括的なテストカバレッジ

### v1.0.0 - Initial Release
- 📝 基本的なひらがな練習機能（15文字）
- 🎨 子供向けUI/UX
- ✏️ タッチ描画機能
- 📱 レスポンシブデザイン

---

**楽しいひらがな学習を！** ✨📝🎌